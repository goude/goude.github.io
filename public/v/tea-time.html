<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary metadata -->
    <title>Tea Temperature Dynamics</title>
    <meta
      name="description"
      content="A visual timer showing when tea is ready to steep, drink, or has gone cold."
    />

    <!-- Open Graph (iOS Messages, WhatsApp, Signal, Slack, etc.) -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Tea Temperature Dynamics" />
    <meta
      property="og:description"
      content="A visual timer showing when tea is ready to steep, drink, or has gone cold."
    />
    <meta property="og:url" content="https://goude.se/v/tea-time.html" />
    <meta
      property="og:image"
      content="https://goude.se/v/tea-time-preview.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter / X -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Tea Temperature Dynamics" />
    <meta
      name="twitter:description"
      content="A visual timer showing when tea is ready to steep, drink, or has gone cold."
    />
    <meta
      name="twitter:image"
      content="https://goude.se/v/tea-time-preview.png"
    />

    <!-- Canonical (prevents weird caching / duplication issues) -->
    <link rel="canonical" href="https://goude.se/v/tea-time.html" />

    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer></script>
  </head>
  <body>
    <!-- Sticky overlay chart -->
    <div class="chart-overlay" id="chartOverlay">
      <div class="chart-wrapper">
        <canvas id="overlayChart"></canvas>
      </div>
      <div class="chart-legend">
        <div class="legend-item">
          <span class="legend-dot steep"></span> Steeping
        </div>
        <div class="legend-item">
          <span class="legend-dot cool"></span> Cooling
        </div>
        <div class="legend-item">
          <span class="legend-dot drinkable"></span> Ideal
        </div>
        <div class="legend-item">
          <span class="legend-dot cold"></span> Cold
        </div>
        <div class="legend-item">
          <span class="legend-marker add"></span> Add
        </div>
        <div class="legend-item">
          <span class="legend-marker remove"></span> Remove
        </div>
      </div>
    </div>

    <!-- Sticky toggle button -->
    <button class="sticky-toggle" id="stickyToggle">
      <svg
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <span id="toggleText">Pin Graph</span>
    </button>

    <div class="container">
      <header>
        <a href="/" class="logo" title="Back to the top.">
          <i class="fa-solid fa-bullseye" aria-hidden="true"></i>
          <span class="sr-only">Home</span>
        </a>

        <h1>Tea Temperature Dynamics</h1>
        <div class="subtitle">Pour · Steep · Cool · Drink</div>
      </header>

      <!-- Real-time Timer -->
      <div class="timer-section">
        <div class="current-temp-label">Live Timer</div>
        <div class="timer-display" id="timerDisplay">0:00</div>
        <div class="timer-phase" id="timerPhase">Ready to start</div>
        <div class="timer-instruction" id="timerInstruction">
          Press Start when you pour the water
        </div>
        <div class="timer-buttons">
          <button class="timer-btn primary" id="timerStartBtn">Start</button>
          <button class="timer-btn secondary" id="timerResetBtn" disabled>
            Reset
          </button>
        </div>
      </div>

      <div class="current-temp">
        <div class="current-temp-label" id="currentTempLabel">
          Temperature at cursor
        </div>
        <div class="current-temp-value" id="currentTemp">100.0°C</div>
        <div class="current-temp-phase" id="currentPhase">Just poured</div>
      </div>

      <div class="markers-info">
        <div class="marker-card">
          <div class="marker-card-label" id="addTeaLabel">Add Tea At</div>
          <div class="marker-card-value add" id="addTeaTime">0:00</div>
        </div>
        <div class="marker-card">
          <div class="marker-card-label" id="removeTeaLabel">Remove Tea At</div>
          <div class="marker-card-value remove" id="removeTeaTime">4:00</div>
        </div>
        <div class="marker-card">
          <div class="marker-card-label" id="drinkableLabel">Drinkable At</div>
          <div class="marker-card-value drinkable" id="drinkableTime">--</div>
        </div>
      </div>

      <div class="chart-section">
        <div class="chart-container">
          <div class="chart-wrapper">
            <canvas id="tempChart"></canvas>
          </div>
          <div class="chart-legend">
            <div class="legend-item">
              <span class="legend-dot steep"></span> Steeping
            </div>
            <div class="legend-item">
              <span class="legend-dot cool"></span> Cooling
            </div>
            <div class="legend-item">
              <span class="legend-dot drinkable"></span> Ideal
            </div>
            <div class="legend-item">
              <span class="legend-dot cold"></span> Cold
            </div>
            <div class="legend-item">
              <span class="legend-marker add"></span> Add tea
            </div>
            <div class="legend-item">
              <span class="legend-marker remove"></span> Remove tea
            </div>
          </div>
          <div class="time-scrubber">
            <div class="time-display">
              Time: <span id="timeDisplay">0:00</span>
            </div>
            <input type="range" id="timeScrubber" min="0" max="100" value="0" />
          </div>
        </div>
      </div>

      <div class="equation-box">
        <div class="equation-title">Newton's Law of Cooling</div>
        <div class="equation">
          T(t) = <span id="eqTambMain">22</span> + (<span id="eqT0Main"
            >100</span
          >
          − <span id="eqTambMain2">22</span>) · e<sup
            >−<span id="eqKeffMain">0.0250</span>·t</sup
          >
        </div>

        <div class="equation-values">
          <strong>Current Parameters:</strong><br />
          T<sub>amb</sub> = <span id="eqTamb">22</span>°C (ambient/room
          temperature)<br />
          T<sub>0</sub> = <span>100</span>°C (initial pour temperature)<br />
          k<sub>base</sub> = <span id="eqKbase">0.025</span> min⁻¹ (material
          constant)<br />
          V = <span id="eqVolume">250</span> ml<br />
          k<sub>eff</sub> = k<sub>base</sub> · √(250/V) =
          <span id="eqKeff">0.0250</span> min⁻¹
        </div>

        <div class="equation-section">
          <div class="equation-toggle" id="equationToggle">
            <span class="equation-section-title">Detailed Calculations</span>
            <span class="equation-toggle-icon" id="equationToggleIcon">▼</span>
          </div>
          <div class="equation-details" id="equationDetails">
            <div class="equation-values">
              <strong>Phase 1: Pre-steep cooling</strong> (t = 0 to
              t<sub>add</sub>)<br />
              T(t) = <span id="eqTamb2">22</span> + (<span>100</span> −
              <span id="eqTamb3">22</span>) · e<sup
                >−<span id="eqK1">0.0250</span>·t</sup
              ><br />
              <br />
              <strong
                >Time to reach brew temp (<span id="eqBrewTemp">95</span
                >°C):</strong
              ><br />
              t<sub>add</sub> = −ln((<span id="eqBrewTemp2">95</span> −
              <span id="eqTamb8">22</span>) / (<span>100</span> −
              <span id="eqTamb9">22</span>)) / <span id="eqK4">0.0250</span
              ><br />
              t<sub>add</sub> = <span id="eqTadd">0.00</span> min<br />
              <br />
              <strong>Phase 2: Steeping</strong> (t<sub>add</sub> to
              t<sub>remove</sub>)<br />
              T(t) = <span id="eqTamb4">22</span> + (T<sub>add</sub> −
              <span id="eqTamb5">22</span>) · e<sup
                >−<span id="eqK2">0.0250</span>·(t − t<sub>add</sub>)</sup
              ><br />
              where T<sub>add</sub> = <span id="eqTaddTemp">95.0</span>°C<br />
              t<sub>remove</sub> = t<sub>add</sub> +
              <span id="eqSteepTime">4.0</span> =
              <span id="eqTremove">4.00</span> min<br />
              T<sub>remove</sub> = <span id="eqTremoveTemp">87.3</span>°C<br />
              <br />
              <strong>Phase 3: Post-steep cooling</strong> (t >
              t<sub>remove</sub>)<br />
              T(t) = <span id="eqTamb6">22</span> + (T<sub>remove</sub> −
              <span id="eqTamb7">22</span>) · e<sup
                >−<span id="eqK3">0.0250</span>·(t − t<sub>remove</sub>)</sup
              >
            </div>
            <div class="equation-note">
              All three phases use identical k<sub>eff</sub> =
              <span id="eqKeffNote">0.0250</span> min⁻¹. The curve is
              continuous—each phase starts where the previous ended.
            </div>
          </div>
        </div>
      </div>

      <div class="controls-section">
        <div class="section-title">Tea Selection</div>

        <div class="control-group">
          <div class="control-label">
            <label>Tea Type</label>
          </div>
          <div class="select-wrapper">
            <select id="teaType">
              <option value="black">Black Tea (95°C, 4 min)</option>
              <option value="green">Green Tea (80°C, 2 min)</option>
              <option value="white">White Tea (75°C, 3 min)</option>
              <option value="oolong">Oolong Tea (90°C, 3 min)</option>
              <option value="herbal">Herbal Infusion (100°C, 5 min)</option>
              <option value="rooibos">Rooibos (100°C, 5 min)</option>
              <option value="custom">Custom Settings</option>
            </select>
          </div>
        </div>
      </div>

      <div class="controls-section">
        <div class="section-title">Brew Parameters</div>

        <div class="control-group">
          <div class="control-label">
            <label>Add Tea at Temperature</label>
            <span class="control-value" id="brewTempValue">95°C</span>
          </div>
          <input type="range" id="brewTemp" min="70" max="100" value="95" />
        </div>

        <div class="control-group">
          <div class="control-label">
            <label>Steep Time</label>
            <span class="control-value" id="steepTimeValue">4 min</span>
          </div>
          <input
            type="range"
            id="steepTime"
            min="0.5"
            max="10"
            value="4"
            step="0.5"
          />
        </div>

        <div class="control-group">
          <div class="control-label">
            <label>Water Volume</label>
            <span class="control-value" id="volumeValue">250 ml</span>
          </div>
          <input
            type="range"
            id="volume"
            min="100"
            max="500"
            value="250"
            step="25"
          />
        </div>
      </div>

      <div class="controls-section">
        <div class="section-title">Environment</div>

        <div class="control-group">
          <div class="control-label">
            <label>Cup Material / Cooling Constant</label>
            <span class="control-value" id="kValue">0.025</span>
          </div>
          <input
            type="range"
            id="kSlider"
            min="0.001"
            max="0.200"
            value="0.025"
            step="0.001"
          />
          <div class="k-presets">
            <button
              class="k-preset-btn"
              data-k="0.001"
              title="Perfect vacuum flask"
            >
              Vacuum (0.001)
            </button>
            <button
              class="k-preset-btn"
              data-k="0.008"
              title="Double-walled insulated"
            >
              Insulated (0.008)
            </button>
            <button
              class="k-preset-btn active"
              data-k="0.025"
              title="Standard ceramic mug"
            >
              Ceramic (0.025)
            </button>
            <button class="k-preset-btn" data-k="0.030" title="Glass cup">
              Glass (0.030)
            </button>
            <button
              class="k-preset-btn"
              data-k="0.035"
              title="Paper/cardboard cup"
            >
              Paper (0.035)
            </button>
            <button class="k-preset-btn" data-k="0.040" title="Thin metal cup">
              Metal (0.040)
            </button>
            <button
              class="k-preset-btn"
              data-k="0.100"
              title="Metal cup with spoon, windy day"
            >
              Windy Metal (0.100)
            </button>
            <button
              class="k-preset-btn"
              data-k="0.200"
              title="Shallow dish, fan blowing"
            >
              Petri Dish + Fan (0.200)
            </button>
          </div>
        </div>

        <div class="control-group">
          <div class="control-label">
            <label>Room Temperature</label>
            <span class="control-value" id="roomTempValue">22°C</span>
          </div>
          <input type="range" id="roomTemp" min="15" max="30" value="22" />
        </div>
      </div>

      <div class="controls-section">
        <div class="section-title">Drinking Zone</div>

        <div class="control-group">
          <div class="control-label">
            <label>Safe to Drink (upper)</label>
            <span class="control-value" id="drinkableTempValue">60°C</span>
          </div>
          <input type="range" id="drinkableTemp" min="50" max="70" value="60" />
        </div>

        <div class="control-group">
          <div class="control-label">
            <label>Too Cold (lower)</label>
            <span class="control-value" id="coldTempValue">45°C</span>
          </div>
          <input type="range" id="coldTemp" min="35" max="55" value="45" />
        </div>
      </div>

      <div class="info-tabs">
        <div class="tab-buttons">
          <button class="tab-btn active" data-tab="howto">How To</button>
          <button class="tab-btn" data-tab="physics">Physics</button>
          <button class="tab-btn" data-tab="xanthines">Xanthines</button>
          <button class="tab-btn" data-tab="tea">Tea Guide</button>
          <button class="tab-btn" data-tab="tips">Temperatures</button>
        </div>

        <div class="tab-content active" id="tab-howto">
          <h3>How to Use This Timer</h3>

          <div class="step">
            <div class="step-num">1</div>
            <div class="step-content">
              <div class="step-title">Boil water</div>
              <div class="step-detail">
                Bring fresh water to a rolling boil (100°C).
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-num">2</div>
            <div class="step-content">
              <div class="step-title">Pour & Start timer</div>
              <div class="step-detail">
                Pour boiling water into your cup and immediately press
                <strong>Start</strong>. The timer begins tracking temperature.
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-num">3</div>
            <div class="step-content">
              <div class="step-title">Wait for "Add Tea" alert</div>
              <div class="step-detail">
                When water reaches <span id="howtoBrewTemp">95°C</span>, add
                your tea leaves or bag. The timer will tell you.
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-num">4</div>
            <div class="step-content">
              <div class="step-title">Remove tea at steep end</div>
              <div class="step-detail">
                After <span id="howtoSteepTime">4 minutes</span> of steeping,
                remove the tea to prevent bitterness.
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-num">5</div>
            <div class="step-content">
              <div class="step-title">Wait for drinkable temperature</div>
              <div class="step-detail">
                The timer shows when tea reaches
                <span id="howtoDrinkTemp">60°C</span>—safe to drink without
                burning your mouth.
              </div>
            </div>
          </div>

          <p style="margin-top: 1rem">
            <strong>Tip:</strong> The graph line moves in real-time, showing
            exactly where you are in the process.
          </p>
        </div>

        <div class="tab-content" id="tab-physics">
          <h3>The Physics of Cooling</h3>
          <p>
            Newton's Law of Cooling states that the rate of heat loss is
            proportional to the temperature difference between the object and
            its surroundings:
          </p>
          <p><code>dT/dt = −k(T − T<sub>amb</sub>)</code></p>
          <p>
            Solving this differential equation gives the exponential decay
            formula shown above.
          </p>
          <p>The cooling constant <code>k</code> depends on:</p>
          <ul>
            <li>
              <strong>Surface area to volume ratio</strong> — wider cups cool
              faster
            </li>
            <li>
              <strong>Material thermal conductivity</strong> — metal conducts
              heat away faster than ceramic
            </li>
            <li>
              <strong>Convection</strong> — air movement accelerates cooling
            </li>
            <li>
              <strong>Insulation</strong> — vacuum flasks dramatically slow heat
              loss
            </li>
          </ul>
          <p>
            We model volume effects with
            <code>k<sub>eff</sub> = k<sub>base</sub> · √(250/V)</code>. This
            approximates how larger volumes have relatively less surface area
            for heat loss.
          </p>

          <h4>Extreme k values</h4>
          <p>
            <strong>Very low k (0.001):</strong> A perfect vacuum flask. Heat
            can only escape via the lid and radiation—takes hours to cool
            significantly.
          </p>
          <p>
            <strong>Very high k (0.200):</strong> A shallow petri dish with a
            fan blowing across it. Maximum surface area, forced convection, and
            thin liquid layer. Cools in minutes.
          </p>

          <p>
            <strong>Note:</strong> Real-world cooling involves radiation and
            evaporation too, but Newton's Law provides a good first-order model
            for beverage cooling.
          </p>
        </div>

        <div class="tab-content" id="tab-xanthines">
          <h3>Xanthines in Tea</h3>
          <p>
            Tea contains several methylxanthine alkaloids—psychoactive compounds
            that affect the nervous system. The three main ones:
          </p>

          <h4>Caffeine (1,3,7-trimethylxanthine)</h4>
          <p>
            The primary stimulant. Blocks adenosine receptors, promoting
            alertness. Half-life: 3-7 hours.
          </p>

          <h4>Theophylline (1,3-dimethylxanthine)</h4>
          <p>
            Bronchodilator and mild stimulant. Relaxes smooth muscle. Present in
            small amounts in tea. Used medically for asthma.
          </p>

          <h4>Theobromine (3,7-dimethylxanthine)</h4>
          <p>
            Milder stimulant than caffeine. Longer half-life (~7 hours). Creates
            a gentler, more sustained effect. Also found in chocolate.
          </p>

          <table class="xanthine-table">
            <thead>
              <tr>
                <th>Tea Type</th>
                <th>Caffeine</th>
                <th>L-Theanine</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Black</td>
                <td>40-70mg</td>
                <td>24mg</td>
                <td>Highest caffeine, full oxidation</td>
              </tr>
              <tr>
                <td>Oolong</td>
                <td>30-50mg</td>
                <td>~20mg</td>
                <td>Partial oxidation, varies widely</td>
              </tr>
              <tr>
                <td>Green</td>
                <td>20-45mg</td>
                <td>~20mg</td>
                <td>Unoxidized, more L-theanine</td>
              </tr>
              <tr>
                <td>White</td>
                <td>15-30mg</td>
                <td>~18mg</td>
                <td>Minimal processing, delicate</td>
              </tr>
              <tr>
                <td>Herbal</td>
                <td>0mg</td>
                <td>0mg</td>
                <td>Not <em>Camellia sinensis</em></td>
              </tr>
              <tr>
                <td>Rooibos</td>
                <td>0mg</td>
                <td>0mg</td>
                <td><em>Aspalathus linearis</em>, caffeine-free</td>
              </tr>
            </tbody>
          </table>
          <p>
            <em
              >Values per 240ml cup. Actual content varies by cultivar, harvest,
              and brewing parameters.</em
            >
          </p>

          <h4>L-Theanine</h4>
          <p>
            Not a xanthine, but notable: this amino acid unique to tea promotes
            calm alertness by increasing alpha brain waves. It modulates
            caffeine's effects, explaining why tea feels different from coffee
            despite similar caffeine content.
          </p>
        </div>

        <div class="tab-content" id="tab-tea">
          <h3>Optimal Brewing by Type</h3>
          <p>
            <strong>Black tea:</strong> Add at 95°C, steep 3-5 min. Full
            oxidation requires hot water to extract tannins and develop malty,
            robust flavors.
          </p>
          <p>
            <strong>Green tea:</strong> Add at 75-80°C, steep 2-3 min. High
            temperatures extract bitter catechins. Cooler water preserves
            grassy, vegetal notes.
          </p>
          <p>
            <strong>White tea:</strong> Add at 75°C, steep 3-5 min. Minimal
            processing means delicate buds that scorch easily.
          </p>
          <p>
            <strong>Oolong:</strong> Add at 85-90°C, steep 2-4 min. Partial
            oxidation spans a wide flavor range—adjust to the specific oolong.
          </p>
          <p>
            <strong>Herbal infusions:</strong> Add at 100°C, steep 5-7 min. Not
            actually tea—these dried herbs, flowers, and fruits need longer
            extraction.
          </p>
          <p>
            <strong>Rooibos:</strong> Add at 100°C, steep 5-7 min. South African
            "red bush" is naturally caffeine-free with sweet, slightly nutty
            flavor. Very forgiving—won't turn bitter with long steeping.
          </p>
        </div>

        <div class="tab-content" id="tab-tips">
          <h3>Temperature Zones</h3>
          <p>
            <strong>Above 65°C:</strong> Risk of oral burns. The WHO classifies
            beverages above 65°C as "probably carcinogenic to humans" (Group 2A)
            with repeated exposure—thermal damage to esophageal tissue.
          </p>
          <p>
            <strong>60-65°C:</strong> Hot but generally safe. Flavor compounds
            are volatile and aromatic at these temperatures.
          </p>
          <p>
            <strong>55-60°C:</strong> Comfortable drinking zone for most people.
            Optimal balance of heat and flavor release.
          </p>
          <p>
            <strong>45-55°C:</strong> Lukewarm. Still pleasant but flavor
            becomes less vibrant as fewer volatile compounds reach your nose.
          </p>
          <p>
            <strong>Below 45°C:</strong> Cold tea. Aromatic compounds no longer
            volatilize effectively. Some people enjoy cold tea, but it's a
            different flavor profile.
          </p>
          <p>
            The chart shows a
            <span style="color: var(--drinkable)">blue "ideal" zone</span>
            between your drinkable temperature and the "too cold" threshold, and
            a <span style="color: var(--cold)">gray "cold" zone</span> below
            that.
          </p>
        </div>
      </div>

      <div class="signature">
        <div class="signature-text">A Production of</div>
        <div class="signature-name">The Ethical Oil Company</div>
      </div>
    </div>
  </body>
</html>
