Please take the complete code file I have provided, apply the required updates directly to it, and return the entire file in full. Make the smallest possible set of changes, preserve all existing functionality, fix any indentation issues only if necessary, avoid unnecessary refactoring, and do not introduce new structural or stylistic changes beyond what is strictly required to implement the requested fix.

