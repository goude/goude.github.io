/* ==================== Color System ==================== */

:root {
  /* ---------- Palette tokens (immutable source colors) ---------- */

  /* Light palette */
  --palette-light-bg: #faf9f5;
  --palette-light-fg: #3d3d3a;
  --palette-light-accent: #cc7c5e;

  /* Dark palette */
  --palette-dark-bg: #191612;
  --palette-dark-fg: #e7e0d6;
  --palette-dark-accent: #cda77b;

  /* ---------- Named accents (optional, theme-independent) ---------- */
  --accent-green: #668974;
  --accent-blue: #7599c0;
  --accent-purple: #787081;
  --accent-yellow: #cda77b;
  --accent-red: #b76243;

  /* ---------- Active palette (light by default) ---------- */
  --bg: var(--palette-light-bg);
  --fg: var(--palette-light-fg);
  --accent: var(--palette-light-accent);

  /* ---------- Usage tokens (all derived — never repeat raw colors below) ---------- */

  /* Text */
  --text: var(--fg);
  --text-strong: color-mix(in srgb, var(--fg) 100%, var(--bg));
  --text-muted: color-mix(in srgb, var(--fg) 58%, var(--bg));

  /* Surfaces & Structure */
  --surface: color-mix(in srgb, var(--fg) 4%, var(--bg));
  --surface-raised: color-mix(in srgb, var(--fg) 8%, var(--bg));
  --paper: color-mix(in srgb, var(--palette-light-bg) 97%, var(--fg));
  --border: color-mix(in srgb, var(--fg) 14%, var(--bg));
  --rule: color-mix(in srgb, var(--fg) 14%, var(--bg));
  --rule-soft: color-mix(in srgb, var(--fg) 8%, var(--bg));

  /* Interactive */
  --link: var(--accent);
  --focus: var(--accent);
  --accent-dim: color-mix(in srgb, var(--accent) 40%, var(--bg));

  /* ---------- Layout ---------- */
  --page-max: 900px;
  --page-pad: 24px;

  /* ---------- Typography ---------- */
  --font-body-serif: et-book, serif;
  --font-ui: "Staatliches", sans-serif;
  --font-body-sans: "Outfit", sans-serif;
  --font-mono: "JetBrains Mono", monospace;

  --text-sm: 1rem;
  --text-base-size: 1.125rem;
  --text-lg: 1.25rem;
  --text-xl: 1.5rem;
  --text-2xl: 1.75rem;
  --text-3xl: 2.25rem;

  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  --lh-body: 1.618;
  --lh-tight: 1.414;
}

/* ==================== Dark Theme ==================== */
/* Only the three palette vars need switching — all usage tokens cascade. */
/* Serif changes too since Fraunces reads better than et-book on dark backgrounds. */

@media (prefers-color-scheme: dark) {
  :root:not([data-theme-light]) {
    --bg: var(--palette-dark-bg);
    --fg: var(--palette-dark-fg);
    --accent: var(--palette-dark-accent);
    --font-body-serif: "Fraunces", serif;
    --text-strong: var(--accent);
  }
}

[data-theme-dark] {
  --bg: var(--palette-dark-bg);
  --fg: var(--palette-dark-fg);
  --accent: var(--palette-dark-accent);
  --font-body-serif: "Fraunces", serif;
  --text-strong: var(--accent);
}

/* ==================== Light Theme (explicit override) ==================== */
/* Only needed to counteract a dark OS preference when user forces light. */

@media (prefers-color-scheme: light) {
  :root:not([data-theme-dark]) {
    --bg: var(--palette-light-bg);
    --fg: var(--palette-light-fg);
    --accent: var(--palette-light-accent);
    --font-body-serif: et-book, serif;
  }
}

[data-theme-light] {
  --bg: var(--palette-light-bg);
  --fg: var(--palette-light-fg);
  --accent: var(--palette-light-accent);
  --font-body-serif: et-book, serif;
}
