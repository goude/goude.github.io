/* ==================== Color Palettes ==================== */

/* Base + Light (default source values) */
:root {
  /* ---------- Light source palette (immutable) ---------- */
  --palette-bg-light: #faf9f5;
  --palette-fg-light: #3d3d3a;
  --palette-accent-light: #cc7c5e;
  --palette-paper-light: #fbf8f4;

  /* ---------- Dark source palette (immutable) ---------- */
  --palette-bg-dark: #191612;
  --palette-paper-dark: #24201a;
  --palette-surface-dark: #2c2621;
  --palette-rule-dark: #877053;
  --palette-fg-dark: #e7e0d6;
  --palette-accent-dark: #cda77b;

  /* ---------- Named tone palette (shared names, theme-specific values) ---------- */
  /* chromatic accents */
  --tone-green: #668974;
  --tone-blue: #7599c0;
  --tone-purple: #787081;
  --tone-yellow: #cda77b;
  --tone-red: #b76243;

  /* ---------- Semantic text tones (defined, not yet used) ---------- */
  /* light defaults */
  --text-strong: #3d3d3a;
  --text-base: #4a4844;
  --text-muted: #6b6862;

  /* ---------- Active palette (theme-switchable) ---------- */
  --palette-bg: var(--palette-bg-light);
  --palette-fg: var(--palette-fg-light);
  --palette-accent: var(--palette-accent-light);
  --palette-paper: var(--palette-paper-light);

  /* ---------- Derived tokens ---------- */
  --bg: var(--palette-bg);
  --fg: var(--palette-fg);
  --accent: var(--palette-accent);
  --paper: var(--palette-paper);

  --fg-muted: color-mix(in srgb, var(--palette-fg) 58%, var(--palette-bg));
  --rule: color-mix(in srgb, var(--palette-fg) 14%, var(--palette-bg));
  --surface: color-mix(in srgb, var(--palette-fg) 4%, var(--palette-bg));

  /* ---------- Layout ---------- */
  --page-max: 900px;
  --page-pad: 24px;

  /* ---------- Typography ---------- */
  --font-serif: et-book, Palatino, "Palatino Linotype", Georgia, serif;
  --font-sans:
    "Source Sans Pro", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    sans-serif;
  --font-code: "SF Mono", Monaco, "Cascadia Code", Consolas, monospace;

  --text-sm: 1rem;
  --text-base-size: 1.125rem;
  --text-lg: 1.25rem;
  --text-xl: 1.5rem;
  --text-2xl: 1.75rem;
  --text-3xl: 2.25rem;

  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  --lh-body: 1.618;
  --lh-tight: 1.414;
}

/* ==================== Dark Theme ==================== */

@media (prefers-color-scheme: dark) {
  :root:not([data-theme-light]) {
    --palette-bg: var(--palette-bg-dark);
    --palette-fg: var(--palette-fg-dark);
    --palette-accent: var(--palette-accent-dark);
    --palette-paper: var(--palette-paper-dark);

    --surface: var(--palette-surface-dark);
    --rule: var(--palette-rule-dark);

    /* semantic text tones – dark */
    --text-strong: #cda77b; /* headings */
    --text-base: #e7e0d6; /* sub-headings */
    --text-muted: #989082; /* running text */
  }
}

[data-theme-dark] {
  --palette-bg: var(--palette-bg-dark);
  --palette-fg: var(--palette-fg-dark);
  --palette-accent: var(--palette-accent-dark);
  --palette-paper: var(--palette-paper-dark);

  --surface: var(--palette-surface-dark);
  --rule: var(--palette-rule-dark);

  --text-strong: #cda77b;
  --text-base: #e7e0d6;
  --text-muted: #989082;
}

/* ==================== Explicit Light ==================== */

[data-theme-light] {
  --palette-bg: var(--palette-bg-light);
  --palette-fg: var(--palette-fg-light);
  --palette-accent: var(--palette-accent-light);
  --palette-paper: var(--palette-paper-light);

  /* semantic text tones – light */
  --text-strong: #3d3d3a;
  --text-base: #4a4844;
  --text-muted: #6b6862;
}
