---
// src/components/ThemeToggle.astro
---

<style>
  .theme-toggle {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.25rem;
    color: inherit;
    display: flex;
    align-items: center;
  }
  
  .theme-toggle:hover {
    opacity: 0.7;
  }
</style>

<button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
  <span id="theme-icon">‚òÄÔ∏è</span>
</button>

<script is:inline>
  // Initialize theme based on system preference
  const themeToggle = document.getElementById('theme-toggle');
  const themeIcon = document.getElementById('theme-icon');
  
  function updateIcon() {
    const isDark = document.documentElement.style.colorScheme === 'dark' || 
      (document.documentElement.style.colorScheme !== 'light' && 
       window.matchMedia('(prefers-color-scheme: dark)').matches);
    
    themeIcon.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
  }
  
  function toggleTheme() {
    const currentScheme = document.documentElement.style.colorScheme;
    const isDark = currentScheme === 'dark' || 
      (currentScheme !== 'light' && window.matchMedia('(prefers-color-scheme: dark)').matches);
    
    document.documentElement.style.colorScheme = isDark ? 'light' : 'dark';
    updateIcon();
  }
  
  // Set initial state
  updateIcon();
  
  // Add click listener
  themeToggle.addEventListener('click', toggleTheme);
</script>